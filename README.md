# Mobile Open Clo (모바일 오픈 클로)

> 개인 맞춤형 능동 비서 앱 - AI가 먼저 말을 거는 건강 & 감정 & 일정 비서

## 프로젝트 소개

기존의 AI 비서가 **수동적(사용자가 먼저 질문)**이라면, **모바일 오픈 클로**는 사용자의 일상 데이터를 기반으로 **먼저 말을 거는 능동적 비서**입니다.

**예시:**
- "오늘 컨디션이 안 좋아 보이는데, 운동 일정은 내일로 미룰까요?"
- "요즘 좀 힘든 시간을 보내고 있는 것 같아요. 지난달에 산책하고 나서 기분이 좋아졌다고 쓰셨었는데, 오늘 10분만 걸어볼까요?"

## 기획 동기

기존의 '오픈 클로'가 직장인과 PC 환경에 맞추어져 있다면, **모바일 오픈 클로**는 알바생, 학생, 혹은 휴식 중인 일반인들도 쉽게 사용할 수 있는 **개인 맞춤형 건강 & 감정 & 일정 비서**를 목표로 합니다.

## 핵심 기능

| 기능 | 설명 |
|------|------|
| **능동적 알림** | 사용자의 상태를 파악하여 AI가 먼저 말을 걸어 제안 |
| **다이어리 기반 개인화** | 일상 기록을 바탕으로 성향, 건강 상태, 선호도 파악 |
| **데이터 연동** | Google 캘린더, 이메일, 건강 데이터(걸음 수, 수면 등) API 연동 |
| **감정 분석** | 다이어리에서 자동 감정 추출 및 패턴 분석 |
| **헬스케어 코칭** | 다이어트 및 건강 관리 맞춤 코칭 |
| **음성 입력** | STT(Whisper)를 통한 쉬운 입력 인터페이스 |

## 기존 서비스와의 차별점

| 서비스 | 한계 | 모바일 오픈 클로 |
|--------|------|-----------------|
| ChatGPT/Claude/Gemini | 범용적이지만 수동적, 개인 데이터 연동 불가 | 실시간 데이터 연동 + 선제적 조언 |
| 일반 투두 앱 | 계획이 틀어져도 상황/감정 고려 불가 | 감정 기반 유연한 대처 |
| 오픈 클로(PC) | 업무 효율 집중, 헬스케어/감정 케어 부족 | 일상 전반의 케어 |

---

## 서비스 아키텍처

```
┌─────────────────────────────────────────────────┐
│                   클라이언트 (모바일)                │
│  React Native / Expo                            │
│  ┌───────────┐ ┌──────────┐ ┌────────────────┐  │
│  │ 다이어리 UI │ │ 챗 인터페이스│ │ 대시보드/알림   │  │
│  └───────────┘ └──────────┘ └────────────────┘  │
│  ┌───────────────────────────────────────────┐  │
│  │ 온디바이스 AI (Gemini Nano / TFLite)       │  │
│  │ - 감정 분류 (텍스트/음성 톤)                  │  │
│  │ - 간단한 의도 파악                           │  │
│  │ - 오프라인 응답 캐시                          │  │
│  └───────────────────────────────────────────┘  │
└──────────────────────┬──────────────────────────┘
                       │ REST / WebSocket
┌──────────────────────▼──────────────────────────┐
│                  백엔드 (클라우드)                  │
│  ┌────────────┐  ┌─────────────┐  ┌──────────┐  │
│  │ API 서버    │  │ 스케줄러     │  │ Auth     │  │
│  │ (FastAPI)  │  │ (Celery)    │  │ (OAuth2) │  │
│  └─────┬──────┘  └──────┬──────┘  └──────────┘  │
│        │                │                        │
│  ┌─────▼────────────────▼─────────────────────┐  │
│  │          오케스트레이션 레이어                  │  │
│  │  - LLM 라우터 (간단→온디바이스 / 복잡→클라우드) │  │
│  │  - RAG 파이프라인 (LangChain)                │  │
│  │  - 프로액티브 엔진 (트리거 기반 알림 생성)      │  │
│  └─────┬──────────────────────────────────────┘  │
│        │                                         │
│  ┌─────▼──────────────────────────────────────┐  │
│  │              데이터 레이어                     │
│  │  PostgreSQL : 사용자 프로필, 일정, 설정        │
│  │  Redis      : 세션 캐시, 실시간 상태           │
│  │  Pinecone   : 다이어리 임베딩 (벡터 DB)        │
│  │  S3         : 음성 파일, 이미지 저장            │
│  └────────────────────────────────────────────┘  │
└──────────────────────┬──────────────────────────┘
                       │
┌──────────────────────▼──────────────────────────┐
│              외부 API 연동                         │
│  Google Calendar API / Google Fit API            │
│  Apple HealthKit / Gmail API                     │
│  STT (Whisper API) / TTS                         │
└─────────────────────────────────────────────────┘
```

### 설계 포인트

- **온디바이스 vs 클라우드 분기**: 감정 분류, 간단한 분류 작업은 온디바이스로 처리하여 속도와 프라이버시 확보. 복잡한 일정 재조정, 코칭 대화는 클라우드 LLM 호출
- **프로액티브 엔진**: 스케줄러가 주기적으로 사용자 상태를 체크하고, 조건 충족 시 알림을 생성하는 이벤트 드리븐 구조

---

## 개인화된 페르소나 구축 로직 (RAG)

```
[사용자 데이터 수집]
    │
    ├── 다이어리 텍스트 → 임베딩 → 벡터 DB 저장
    ├── 감정 라벨링 (기쁨/슬픔/피로/불안 등)
    ├── 캘린더 이벤트 → 구조화된 메타데이터
    └── 건강 데이터 → 수치 요약 (걸음수, 수면시간)

[페르소나 프로필 문서 생성] (주기적 업데이트)
    │
    ├── 성향 요약: "사용자는 아침형이며, 운동 후 기분이 좋아지는 패턴"
    ├── 선호도: "짧고 직접적인 조언 선호, 이모지 사용 좋아함"
    ├── 건강 패턴: "수면 6시간 이하일 때 다음날 컨디션 저하"
    └── 스트레스 트리거: "시험 기간, 알바 연속 근무"

[RAG 파이프라인 - 질의 시]
    │
    ① 사용자 현재 상태 파악 (시간, 캘린더, 최근 감정)
    ② 관련 다이어리 검색 (벡터 유사도 기반)
    ③ 페르소나 프로필 + 검색 결과 → 프롬프트 컨텍스트 구성
    ④ LLM에 전달 → 개인화된 응답 생성
```

### RAG 파이프라인 예시 코드

```python
def build_context(user_id, current_situation):
    # 1. 페르소나 프로필 로드
    persona = db.get_persona_profile(user_id)

    # 2. 관련 다이어리 검색 (최근 감정/상황 기반)
    relevant_entries = vector_db.similarity_search(
        query=current_situation,
        filter={"user_id": user_id},
        top_k=5
    )

    # 3. 현재 컨텍스트 수집
    calendar = google_calendar.get_today_events(user_id)
    health = health_api.get_recent_data(user_id)

    # 4. 시스템 프롬프트 구성
    return f"""
    [사용자 페르소나] {persona}
    [관련 과거 기록] {relevant_entries}
    [오늘 일정] {calendar}
    [건강 상태] {health}
    위 정보를 바탕으로 사용자에게 자연스럽게 조언하세요.
    """
```

### 페르소나 업데이트 주기

- 다이어리 작성 시 → 실시간 임베딩 추가
- 매주 1회 → 성향 요약 재생성 (최근 데이터 가중치 부여)

---

## MVP 개발 로드맵

| 우선순위 | 기능 | 이유 |
|---------|------|------|
| **P0** | 다이어리 작성 & 저장 | 모든 개인화의 기반 데이터. 가장 먼저 구축 |
| **P0** | 기본 챗 인터페이스 | 사용자와 AI 간 대화 채널 확보 |
| **P1** | 감정 분석 & 태깅 | 다이어리에서 자동으로 감정 추출, 패턴 분석의 토대 |
| **P1** | Google 캘린더 연동 | 일정 맥락 파악, 능동적 제안의 핵심 데이터 |
| **P2** | 프로액티브 알림 (기본) | 차별화 핵심 기능. 시간 기반 + 일정 기반 트리거 |
| **P2** | RAG 기반 개인화 응답 | 다이어리 축적 후 적용 가능 |
| **P3** | 건강 데이터 연동 | Google Fit / HealthKit API |
| **P3** | STT 음성 입력 | UX 개선. Whisper API 활용 |
| **P4** | 온디바이스 AI | 최적화 단계. 초기엔 클라우드만으로 충분 |
| **P4** | 다이어트/헬스 코칭 | 데이터 충분히 쌓인 후 고도화 |

**추천 MVP 범위 (4~6주):** P0 + P1까지 구현 → 사용자 피드백 수집 → P2 진행

---

## 프로액티브 알림 시나리오

### 시나리오 1: 컨디션 기반 일정 조정 제안

```
[트리거] 수면 데이터 5시간 이하 + 오늘 운동 일정 존재
[타이밍] 기상 후 30분 (활동 감지 기준)
[메시지]
  "좋은 아침! 어젯밤 수면이 좀 부족했네요.
   오늘 오후 3시 헬스장 일정이 있는데,
   가벼운 스트레칭으로 바꾸거나 내일로 옮길까요?"
  [가볍게 할게] [내일로 미루기] [그대로 할게]
```

### 시나리오 2: 반복 패턴 기반 격려

```
[트리거] 다이어리 감정 분석에서 3일 연속 "피로/우울" 감지
[타이밍] 저녁 8시 (사용자의 평소 다이어리 작성 시간대)
[메시지]
  "요즘 좀 힘든 시간을 보내고 있는 것 같아요.
   지난달 비슷한 시기에 산책하고 나서 기분이 좋아졌다고
   쓰셨었는데, 오늘 가볍게 10분만 걸어볼까요?"
  [산책 알림 설정] [오늘은 쉴래] [기록 남기기]
```

### 시나리오 3: 일정 공백 활용 제안

```
[트리거] 캘린더에 2시간 이상 빈 시간 + 미완료 투두 존재
[타이밍] 빈 시간 시작 15분 전
[메시지]
  "2시부터 4시까지 여유 시간이 있네요!
   밀린 할 일 중에 '정보처리기사 문제풀이'가 있던데,
   이 시간에 30분만 해볼까요?
   나머지는 자유 시간으로 쓰면 돼요."
  [30분 집중 시작] [다른 할 일 볼게] [자유 시간으로 쓸래]
```

**거부감 최소화 원칙:**
- 선택지를 항상 제공하여 자율성 보장
- 판단을 강요하지 않고 "~할까요?" 형태 사용
- 과거 본인의 기록을 근거로 제시하여 신뢰감 형성
- 전체 시간을 차지하지 않고 일부만 제안하여 압박감 해소

---

## 기술 스택

| 영역 | 기술 |
|------|------|
| **프론트엔드** | React Native / Expo |
| **백엔드** | FastAPI (Python) |
| **데이터베이스** | PostgreSQL, Redis |
| **벡터 DB** | Pinecone |
| **클라우드 LLM** | Claude API / GPT API |
| **온디바이스 AI** | Gemini Nano / TFLite |
| **STT** | Whisper API |
| **스케줄러** | Celery + Redis |
| **인증** | OAuth 2.0 (Google) |
| **스토리지** | AWS S3 |
| **외부 API** | Google Calendar, Google Fit, Apple HealthKit |

---

## 포트폴리오 강조 포인트

### 1. 하이브리드 AI 아키텍처 (온디바이스 + 클라우드)
온디바이스 모델과 클라우드 LLM을 상황에 따라 라우팅하는 설계. "비용 최적화 + 프라이버시 + 응답 속도" 세 마리 토끼를 잡는 구조.

### 2. 프로액티브 AI 엔진 설계
기존 챗봇의 "질문→응답" 패러다임을 벗어난 **이벤트 드리븐 능동 대화**. 트리거 조건 설계, 알림 피로도 관리, 적절한 타이밍 알고리즘.

### 3. RAG 기반 장기 기억 개인화
사용자 데이터가 쌓일수록 정교해지는 개인화 파이프라인. LLM의 컨텍스트 윈도우 한계를 벡터 DB로 극복.

### 4. 민감한 개인 데이터 보안 설계
건강/감정 데이터라는 고도로 민감한 정보를 다루며, GDPR/개인정보보호법을 고려한 암호화 및 데이터 최소 수집 원칙 적용.

### 5. 크로스 플랫폼 네이티브 기능 활용
React Native에서 HealthKit/Google Fit, 접근성 서비스, 백그라운드 작업 처리 등 네이티브 수준의 경험 구현.

---

## 개발자 정보

컴퓨터공학 전공 학생 개발자. 리눅스 마스터 1급과 정보처리기사를 준비 중이며, C, Python, React, Next.js 등 현대적인 스택에 익숙합니다.

## 라이선스

MIT License
